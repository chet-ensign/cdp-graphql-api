= Context Server 1.0.0
:toc: macro
:toclevels: 4
:sectnums:

image::images/OASISLogo.jpg["Oasis Open Logo"]


\[Stage]

01 June 2018

Specification URIs:

This Version:
  http://docs.oasis-open.org/[tc-short-name]/[additional path/filename].html
  http://docs.oasis-open.org/[tc-short-name]/[additional path/filename].pdf

Previous Version:
  http://docs.oasis-open.org/[tc-short-name]/[additional path/filename].html
  http://docs.oasis-open.org/[tc-short-name]/[additional path/filename].pdf

Latest Version:
  http://docs.oasis-open.org/[tc-short-name]/[additional path/filename].html
  http://docs.oasis-open.org/[tc-short-name]/[additional path/filename].pdf

Technical Committee:

OASIS CXS TC

Chair(s):
  Serge Huber
  Thomas Lund Sigdestad

Editor(s):
  [Editor name]
  [Editor name]

Related Work:
  This specification replaces or supersedes:
  [specifications replaced by this standard - OASIS as well as other standards organizations]
  [specifications replaced by this standard - OASIS as well as other standards organizations]

This specification is related to:
  [specifications related to this standard - OASIS as well as other standards organizations]
  [specifications related to this standard - OASIS as well as other standards organizations]

Declared XML Namespace(s):
  [list namespaces here]
  [list namespaces here]

Abstract:
  [Abstract goes here]

Status:
  This document was last revised or approved by the [TC name | membership of OASIS] on the above date. The level of approval is also listed above. Check the "Latest Version" or "Latest Approved Version" location noted above for possible later revisions of this document.

  Technical Committee members should send comments on this specification to the Technical Committee’s email list. Others should send comments to the Technical Committee by using the “Send A Comment” button on the Technical Committee’s web page at http://www.oasis-open.org/committees/[specific location].

  For information on whether any patents have been disclosed that may be essential to implementing this specification, and any offers of patent licensing terms, please refer to the Intellectual Property Rights section of the Technical Committee web page (http://www.oasis-open.org/committees/[specific location]/ipr.php.

  The non-normative errata page for this specification is located at http://www.oasis-open.org/committees/[specific location].

Notices

Copyright © OASIS® 2018. All Rights Reserved.

All capitalized terms in the following text have the meanings assigned to them in the OASIS Intellectual Property Rights Policy (the "OASIS IPR Policy"). The full Policy may be found at the OASIS website.

This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published, and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this section are included on all such copies and derivative works. However, this document itself may not be modified in any way, including by removing the copyright notice or references to OASIS, except as needed for the purpose of developing any document or deliverable produced by an OASIS Technical Committee (in which case the rules applicable to copyrights, as set forth in the OASIS IPR Policy, must be followed) or as required to translate it into languages other than English.

The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns.

This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

OASIS requests that any OASIS Party or any other party that believes it has patent claims that would necessarily be infringed by implementations of this OASIS Committee Specification or OASIS Standard, to notify OASIS TC Administrator and provide an indication of its willingness to grant patent licenses to such patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that produced this specification.

OASIS invites any party to contact the OASIS TC Administrator if it is aware of a claim of ownership of any patent claims that would necessarily be infringed by implementations of this specification by a patent holder that is not willing to provide a license to such patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that produced this specification. OASIS may include such claims on its website, but disclaims any obligation to do so.

OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS' procedures with respect to rights in any document or deliverable produced by an OASIS Technical Committee can be found on the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this OASIS Committee Specification or OASIS Standard, can be obtained from the OASIS TC Administrator. OASIS makes no representation that any information or list of intellectual property rights will at any time be complete, or that any claims in such list are, in fact, Essential Claims.

The names "OASIS", [insert specific trademarked names, abbreviations, etc. here] are trademarks of OASIS, the owner and developer of this specification, and should be used only to refer to the organization and its official outputs. OASIS welcomes reference to, and implementation and use of, specifications, while reserving the right to enforce its marks against misleading uses. Please see http://www.oasis-open.org/who/trademark.php for above guidance.

Table of Contents

toc::[]

\[build table of contents here. Should list at least 3 levels (sections numbered x.x.x) which are hyperlinked to the actual section.]





== Introduction

Today, virtually all business is at some point digital, and the number of systems involved and the set of data collected is growing rapidly.
Each new system creates new silos of customer data, spreading sensitive data across both organizational and geographical borders.

Even the digital savvy businesses struggle to control and utilize this information.
Businesses and users also rely on such data to be accessible in real-time, and at scale - for instance to deliver personalizations.
Additionally businesses now face severe legal charges if customer data is not treated according to regulatory requirements (ref GDPR).

The Context Server (CXS) specification aims to standardize exchange of customer data across systems and silos.
This enables centralization of customer data - consequently giving control of the data back to the business, and the customers.

The CXS standard builds upon four core concepts: Profiles, Events, Consents, and Clients

  * Profiles represent each individual "customer". Aggregating and tracking all registered properties, including which system actually collected the data.
  * Events represent user behavioral data / interactions performed by a customer (aka profile). A purchase, or a simple click on a link represents different events.
  * Consents are actual permission given by a customer to the organization, with a limited scope and duration
  * Clients represent the various systems that provide and/or consume data from a Context Server, typical clients are: CRM systems, Analytics, Content Management Systems, E-commerce systems etc.

Alongside the CXS standard, an open source reference implementation called Apache UNOMI has been developed.
UNOMI provides a high-performance and scalable implementation of CXS that enables deployment in your organization today.

The CXS standard is defined as a web-based API, through the self-documenting and strongly typed GraphQL syntax.

It has been an explicit goal of the CXS committee to allow extensive customization of CXS deployments, in order to fit the need of each different organization.
As such, the API dynamically evolves as you add custom property-, event-, and consent-types to your deployment.


=== Terminology

The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” are to be interpreted as described in [RFC2119].

=== Normative References

\[RFC2119]

S Bradner, Key words for use in RFCs to Indicate Requirement Levels, http://www.ietf.org/rfc/rfc2119.txt, IETF RFC 2119, March 1997.

\[Reference]

\[Full reference citation]



NOTE: The proper format for a citation to an OASIS Technical Committee's work (whether Normative or Non-Normative) is:

OASIS
Stage (Committee Draft 01, Committee Draft 02, Committee Specifcation 01, etc. or Standard)
Title (italicized or in quotation marks)
Approval Date (Month YYYY)
URI of the actual Authoritative Specification (namespace is not acceptable as the content changes over time)

For example:

\[EDXL-HAVE]

OASIS Standard, "Emergency Data Exchange Language (EDXL) Hospital AVailability Exchange (HAVE) Version 1.0", November 2008.
http://docs.oasis-open.org/emergency/edxl-have/os/emergency_edxl_have-1.0-spec-os.doc


=== Non-Normative References

\[Reference]

\[Full reference citation]

== Domain Model
This chapter describes the entities of the CXS domain model, and how they relate

=== Profiles
Profiles are in many ways what CXS is about. A Context Server dynamically build profiles from events that occur over time.

A Profile can be created from an anonymous visitor on a webpage, or populated from an identity system or maybe a CRM - or the combination of all of them.

<<Sources>> like a website, CRM or Identity system can be setup to feed <<Events>> to the context server.
The client is responsible for uniquely identifying users, for instance with a cookie in the CMS, a customer ID in the CRM or a user ID in the Identity server.
The context server will then build profiles based on the provided identifiers.

A profile is made up of the following:

<<Properties>> in the key-value format containing basic data values such as an e-mail, name, date of birth etc.
What properties are available is configured through a global set of <<PropertyTypes>>.

A Profile consists of the following fields:

* ProfileIDs (list of IDs associated with this profile)
* Events (access events associated with this profile)
* Segments (access segment this profile is associated with)
* Interests (Scored list of topics the profile is interested in)
* Lists (Lists the profile is active in)
* Consents (Consents given by the profile)
* Properties (Stored and searchable data properties for the profile)

=== ProfileIDs
Profiles have unique identifiers across different <<Sources>>, and is a composite value from source and a unique identifier within that source.

A ProfileID consists of the following fields:

* ID (mandatory)
* source (mandatory)

=== Sources

Events are collected from different sources, such as a specific website, or a CRM.
In order for the Context Server to build profiles consistently, the CXS only requires profile identifiers to be unique within a single source.

A single source, for instance a website might contain many profiles for a real individual,
for instance when a person uses different devices, a profile will be built for each device. As profiles evolve, the context server may at a point in time be able to link these profiles together - for instance if the user logs in on both devices.

This linking only happens inside the context server, and does not affect the unique id used by the source. As such, if the collector script uses a cookie to set the profile id, it will remain the same even if profiles are linked.

There are no explicit Queries or Mutations for creating/getting Sources in the CXS specification, as this is considered an implementation-specific feature.
Given any CXS implementation, a source must be defined in the system, and be explicitly set in order to collect events and build profiles.

A Source consist of the following fields:

* ID (Preferably a generated value)
* Name (TODO)


=== PropertyTypes

To control what properties can be set for a given instance of a Context Server, a list of property types are globally defined.
A ProfilePropertyType consists of the following:
* Name (a Globally unique name for the instance)
* Type (Identifying the value it stores: Identifier, String, Int, Float, Date, Boolean, GeoPoint or Set. Sets hold a new list of properties)

The objective of ProfilePropertyTypes is to consistently collect data from different sources into profiles. For instance a field called "Date of birth" in one system might be known as "Born" in another.
In the context server these fields are forced to map to a specific property, or may simply be ignored.

TODO: Mapping from clients?

A ProfilePropertyType consists of the following fields:

* ID (mandatory)
* name (mandatory)
* minOccurences - Specify if the property is an array with a minimum number of values
* maxOccurences - Specify if there is a maximum amount of values
* tags
* systemTags
* personalData - Specify if this property holds data that can identify an individual

=== Events
Events are what drives a Context Server forward.
A Context Server is specifically only interested in "User behavior events". This could be anything from someone clicking a link, to performing a transaction or consenting to use of his/hers information.
Events are delivered from specified <<Clients>> to the Context Server.

--THIS NEEDS SOME WORK--
Imagine an e-commerce site with a client that collect events from site visitors.
When you are browsing the site with your laptop, the client assigns a cookie to your browser and starts feeding events to the CXS API.
As you click on some product links, and maybe fill in a form that includes your e-mail. CXS will gradually populate your profile.
Then later, you pick up your mobile device and go back to the site. A new cookie is generated, and a new profile starts to build up.

At some point, data gathered from the different profiles may intersect, i.e. if the same e-mail is registered for multiple profiles.
In such cases, profiles may be linked together in the Context Server. We call this a profile merge.

When profiles are merged, _one_ of the existing profiles will be selected as the master, and additional information from the "slave" profiles merged into the master.
Both profile ID's, and all the related events are kept, so data can still be collected through both profile ID's.

TODO: What happens to old profile? Deleted?

Events consist of the following fields:

* ID (mandatory)
* eventType (mandator)
* profileID
* profile
* object (mandatory) - Reference to a target object for the event, i.e. an SKU, or a link )
* location
* timestamp - When the event occured
* properties - Properties matching the specific eventType

=== Eventttypes

To uniquely separate events, an event must be associated with an EventType.

EventTypes have a unique identifier, and also a defined set of TODO

An EventType consist of the following fields:

* ID (mandatory)
* Scope (mandator)
* typeName (A unique name, preferably in format of a URI??)
* properties (List of available propertyTypes for events)

=== Consents

As new laws regarding use of personal data such as GDPR arrive,
Consents are inherently more important to ensure you are using and storing data in compliance with policies.

Consents consist of the following fields:

* Token (TODO)
* Type (TODO)
* Status
* StatusDate
* revokeDate
* Events
* Profile

=== Personas

Personas is first and foremost a concept used by marketeers to visualize their target customers.

In CXS, personas are basically "mockup" profiles with the primary purpose of testing or emulating what will happen with a real profile that matches the persona.
For instance what a personalization in a CMS or a newsletter might look like.

Personas are (as oppose to profiles) can be explicitly defined, where real profiles are dynamically generated.

A Persona consist of the following fields:

* (TODO)
* Scope

=== Lists

Lists are explicitly created and named. Profiles may then be added to a list, and opt out if desired.
Whenever a profile opts out of a list, that information will also be stored - so the profile is never accidentally added back to the list at a later point.

A common use-case for lists is creating a list for a given campaign, and add the target profiles to the list as the campaign starts.

A List consists of the following fields:

* (TODO)
* Scope

=== Segments

Segments are similar to lists in that profiles may be in the segment or not.
However, where profiles are explicitly added to lists, they are dynamically added to segments based on events that occur.

Administrative users define segments through <<Filters>>.

Example segments:
* Rich europeans: Profiles in Europe with income above €100k
* Frequent buyer: Profiles that have completed more than 5 transactions in the last 3 months
* Etc

Segments consist of the following fields:

* (TODO)
* Scope


=== Topics

Topics represent the core entities of the business running the Context Server.
The Context Server aims to find correlation between profiles and the topics.
When such correlations are identified, it is called <<Interests>>.

CXS Administrators need to maintain a list of topics in order to obtain profile interests.
Profile interests is typically a core objective of Marketing activities, and targeting users with better content.

Example Topics for a car manufacturer might for instance be:
* "Model S"
* "Model 3"
* "Model X"

A Topic consist of the following fields:

* (TODO)
* Scope


=== Interests

Whenever the Context server registers an event that is associated with a specific topic, this will affect the profile's interest for the specific Topic.
A profiles interest in a specific topic is measured between 0-1, where 1 is maximum. As such 0,5 would indicate a higher interest than 0,35.

The algorithm of how a context server identifies interest, and scores it is implementation specific - but implementations should also take care of automatically decreasing interest over time, if no new events occur.

Example interests for products from a car manufacturer might be:
* Model S = 0.1
* Model 3 = 0.3
* Model X = 0.9

An Interest consist of the following fields:

* Topic
* Profile
* Score


=== Filters

Filters are used to extract a limited set of <<Profiles>> or <<Events>> from Context Servers.
As such it is comparable to a query language, but aims to simplify implementation and practical use for administrators and marketeers.

TODO

An Filter consist is built up from the following:

* (TODO)

=== Scopes

Scopes provide an efficient way of grouping administrative objects in the context server.
<<Profiles>>, <<Events>> and <<Consents>>  are collected and stored globally, but other configuration is typically handled by administrators or marketeers, and differ from region to region, or through the various branches of a business.

As such <<Lists>>, <<Segments>>, <<Topics>>, <<Segments>> and <<Personas>> are all tagged with Scopes.

An Scope consist of the following fields:

* (TODO)



== API

CXS defines a standard API based on GraphQL.

In general, the CXS GraphQL API is not intended to be exposed publicly, but only exposed to specific authorized clients.
The logic behind this is that the CXS API itself does not limit access to data, and you need to control which clients are given access at any time.

Examples of clients are: An event collector for your website, a client that performs integration with your CRM etc.


== Conformance

conformance clauses/statements go here

== Appendix A. Acknowledgements

The following individuals have participated in the creation of this specification and are gratefully acknowledged:
Participants:

\[list of acknowledgements as determined by Technical Committee chair(s)]

== Appendix B. Non-Normative Text

[any additional appendices for non-normative text here]

== Appendix C. Revision History

\[Required in all approved Work Products]
Revision 	Date 	Editor 	Changes Made
